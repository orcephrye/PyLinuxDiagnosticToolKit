
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Commandcontainers - PyLinuxDiagnosticToolKit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="lightgreen">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-commandcontainers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PyLinuxDiagnosticToolKit" class="md-header__button md-logo" aria-label="PyLinuxDiagnosticToolKit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyLinuxDiagnosticToolKit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Commandcontainers
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/orcephrye/PyLinuxDiagnosticToolKit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PyLinuxDiagnosticToolKit
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PyLinuxDiagnosticToolKit" class="md-nav__button md-logo" aria-label="PyLinuxDiagnosticToolKit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    PyLinuxDiagnosticToolKit
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/orcephrye/PyLinuxDiagnosticToolKit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PyLinuxDiagnosticToolKit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Summary
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../TUTORIAL/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../PyLinuxDiagnosticToolKit/sshConnector/" class="md-nav__link">
        sshConnector
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../PyLinuxDiagnosticToolKit/LinuxModules/" class="md-nav__link">
        CommandContainer
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Commandcontainers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Commandcontainers
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commandcontainer" class="md-nav__link">
    CommandContainer
  </a>
  
    <nav class="md-nav" aria-label="CommandContainer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkresults" class="md-nav__link">
    checkResults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executor" class="md-nav__link">
    executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finalizeexecution" class="md-nav__link">
    finalizeExecution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performcomplete" class="md-nav__link">
    performComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runcommandsetup" class="md-nav__link">
    runCommandSetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setfailure" class="md-nav__link">
    setFailure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlastresults" class="md-nav__link">
    setLastResults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforresults" class="md-nav__link">
    waitForResults
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commanddata" class="md-nav__link">
    CommandData
  </a>
  
    <nav class="md-nav" aria-label="CommandData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_1" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_1" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_1" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_1" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_1" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_1" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_1" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandparsers" class="md-nav__link">
    CommandParsers
  </a>
  
    <nav class="md-nav" aria-label="CommandParsers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_1" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_2" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_2" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_2" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_2" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_2" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_2" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_2" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandrequirements" class="md-nav__link">
    CommandRequirements
  </a>
  
    <nav class="md-nav" aria-label="CommandRequirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_2" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_3" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_3" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_3" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_3" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_3" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_3" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_3" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_3" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements_1" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition_1" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsetup" class="md-nav__link">
    CommandSetup
  </a>
  
    <nav class="md-nav" aria-label="CommandSetup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_3" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_3" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_4" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_4" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_4" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_4" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_4" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_4" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_4" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_4" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runcommandsetup_1" class="md-nav__link">
    runCommandSetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements_2" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition_2" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SCPChannel/" class="md-nav__link">
        Scpchannel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../SFTPChannel/" class="md-nav__link">
        Sftpchannel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../genericCmdModule/" class="md-nav__link">
        Genericcmdmodule
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ldtk/" class="md-nav__link">
        Ldtk
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshBufferControl/" class="md-nav__link">
        Sshbuffercontrol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshChannelEnvironment/" class="md-nav__link">
        Sshchannelenvironment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshConnect/" class="md-nav__link">
        Sshconnect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshEnvironmentControl/" class="md-nav__link">
        Sshenvironmentcontrol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshEnvironmentManager/" class="md-nav__link">
        Sshenvironmentmanager
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sshThreader/" class="md-nav__link">
        Sshthreader
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commandcontainer" class="md-nav__link">
    CommandContainer
  </a>
  
    <nav class="md-nav" aria-label="CommandContainer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkresults" class="md-nav__link">
    checkResults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executor" class="md-nav__link">
    executor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finalizeexecution" class="md-nav__link">
    finalizeExecution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performcomplete" class="md-nav__link">
    performComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runcommandsetup" class="md-nav__link">
    runCommandSetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setfailure" class="md-nav__link">
    setFailure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setlastresults" class="md-nav__link">
    setLastResults
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#waitforresults" class="md-nav__link">
    waitForResults
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commanddata" class="md-nav__link">
    CommandData
  </a>
  
    <nav class="md-nav" aria-label="CommandData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_1" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_1" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_1" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_1" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_1" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_1" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_1" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_1" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandparsers" class="md-nav__link">
    CommandParsers
  </a>
  
    <nav class="md-nav" aria-label="CommandParsers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_1" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_1" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_2" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_2" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_2" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_2" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_2" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_2" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_2" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_2" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandrequirements" class="md-nav__link">
    CommandRequirements
  </a>
  
    <nav class="md-nav" aria-label="CommandRequirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_2" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_2" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_3" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_3" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_3" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_3" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_3" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_3" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_3" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_3" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements_1" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition_1" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commandsetup" class="md-nav__link">
    CommandSetup
  </a>
  
    <nav class="md-nav" aria-label="CommandSetup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro_3" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants_3" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables_4" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables_4" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods_4" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent_4" class="md-nav__link">
    addEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcecomplete_4" class="md-nav__link">
    forceComplete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handlechildren_4" class="md-nav__link">
    handleChildren
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hasevent_4" class="md-nav__link">
    hasEvent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetcontainers_4" class="md-nav__link">
    resetContainers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runcommandsetup_1" class="md-nav__link">
    runCommandSetup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runrequirements_2" class="md-nav__link">
    runRequirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setrequirementsfailurecondition_2" class="md-nav__link">
    setRequirementsFailureCondition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/orcephrye/PyLinuxDiagnosticToolKit/edit/main/reference/CommandContainers.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="module-commandcontainers">Module CommandContainers</h1>
<p>None</p>
<p>None</p>
<details class="example"><summary>View Source</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">   1</span>
<span class="normal">   2</span>
<span class="normal">   3</span>
<span class="normal">   4</span>
<span class="normal">   5</span>
<span class="normal">   6</span>
<span class="normal">   7</span>
<span class="normal">   8</span>
<span class="normal">   9</span>
<span class="normal">  10</span>
<span class="normal">  11</span>
<span class="normal">  12</span>
<span class="normal">  13</span>
<span class="normal">  14</span>
<span class="normal">  15</span>
<span class="normal">  16</span>
<span class="normal">  17</span>
<span class="normal">  18</span>
<span class="normal">  19</span>
<span class="normal">  20</span>
<span class="normal">  21</span>
<span class="normal">  22</span>
<span class="normal">  23</span>
<span class="normal">  24</span>
<span class="normal">  25</span>
<span class="normal">  26</span>
<span class="normal">  27</span>
<span class="normal">  28</span>
<span class="normal">  29</span>
<span class="normal">  30</span>
<span class="normal">  31</span>
<span class="normal">  32</span>
<span class="normal">  33</span>
<span class="normal">  34</span>
<span class="normal">  35</span>
<span class="normal">  36</span>
<span class="normal">  37</span>
<span class="normal">  38</span>
<span class="normal">  39</span>
<span class="normal">  40</span>
<span class="normal">  41</span>
<span class="normal">  42</span>
<span class="normal">  43</span>
<span class="normal">  44</span>
<span class="normal">  45</span>
<span class="normal">  46</span>
<span class="normal">  47</span>
<span class="normal">  48</span>
<span class="normal">  49</span>
<span class="normal">  50</span>
<span class="normal">  51</span>
<span class="normal">  52</span>
<span class="normal">  53</span>
<span class="normal">  54</span>
<span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span>
<span class="normal">1689</span>
<span class="normal">1690</span>
<span class="normal">1691</span>
<span class="normal">1692</span>
<span class="normal">1693</span>
<span class="normal">1694</span>
<span class="normal">1695</span>
<span class="normal">1696</span>
<span class="normal">1697</span>
<span class="normal">1698</span>
<span class="normal">1699</span>
<span class="normal">1700</span>
<span class="normal">1701</span>
<span class="normal">1702</span>
<span class="normal">1703</span>
<span class="normal">1704</span>
<span class="normal">1705</span>
<span class="normal">1706</span>
<span class="normal">1707</span>
<span class="normal">1708</span>
<span class="normal">1709</span>
<span class="normal">1710</span>
<span class="normal">1711</span>
<span class="normal">1712</span>
<span class="normal">1713</span>
<span class="normal">1714</span>
<span class="normal">1715</span>
<span class="normal">1716</span>
<span class="normal">1717</span>
<span class="normal">1718</span>
<span class="normal">1719</span>
<span class="normal">1720</span>
<span class="normal">1721</span>
<span class="normal">1722</span>
<span class="normal">1723</span>
<span class="normal">1724</span>
<span class="normal">1725</span>
<span class="normal">1726</span>
<span class="normal">1727</span>
<span class="normal">1728</span>
<span class="normal">1729</span>
<span class="normal">1730</span>
<span class="normal">1731</span>
<span class="normal">1732</span>
<span class="normal">1733</span>
<span class="normal">1734</span>
<span class="normal">1735</span>
<span class="normal">1736</span>
<span class="normal">1737</span>
<span class="normal">1738</span>
<span class="normal">1739</span>
<span class="normal">1740</span>
<span class="normal">1741</span>
<span class="normal">1742</span>
<span class="normal">1743</span>
<span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span>
<span class="normal">1760</span>
<span class="normal">1761</span>
<span class="normal">1762</span>
<span class="normal">1763</span>
<span class="normal">1764</span>
<span class="normal">1765</span>
<span class="normal">1766</span>
<span class="normal">1767</span>
<span class="normal">1768</span>
<span class="normal">1769</span>
<span class="normal">1770</span>
<span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span>
<span class="normal">1794</span>
<span class="normal">1795</span>
<span class="normal">1796</span>
<span class="normal">1797</span>
<span class="normal">1798</span>
<span class="normal">1799</span>
<span class="normal">1800</span>
<span class="normal">1801</span>
<span class="normal">1802</span>
<span class="normal">1803</span>
<span class="normal">1804</span>
<span class="normal">1805</span>
<span class="normal">1806</span>
<span class="normal">1807</span>
<span class="normal">1808</span>
<span class="normal">1809</span>
<span class="normal">1810</span>
<span class="normal">1811</span>
<span class="normal">1812</span>
<span class="normal">1813</span>
<span class="normal">1814</span>
<span class="normal">1815</span>
<span class="normal">1816</span>
<span class="normal">1817</span>
<span class="normal">1818</span>
<span class="normal">1819</span>
<span class="normal">1820</span>
<span class="normal">1821</span>
<span class="normal">1822</span>
<span class="normal">1823</span>
<span class="normal">1824</span>
<span class="normal">1825</span>
<span class="normal">1826</span>
<span class="normal">1827</span>
<span class="normal">1828</span>
<span class="normal">1829</span>
<span class="normal">1830</span>
<span class="normal">1831</span>
<span class="normal">1832</span>
<span class="normal">1833</span>
<span class="normal">1834</span>
<span class="normal">1835</span>
<span class="normal">1836</span>
<span class="normal">1837</span>
<span class="normal">1838</span>
<span class="normal">1839</span>
<span class="normal">1840</span>
<span class="normal">1841</span>
<span class="normal">1842</span>
<span class="normal">1843</span>
<span class="normal">1844</span>
<span class="normal">1845</span>
<span class="normal">1846</span>
<span class="normal">1847</span>
<span class="normal">1848</span>
<span class="normal">1849</span>
<span class="normal">1850</span>
<span class="normal">1851</span>
<span class="normal">1852</span>
<span class="normal">1853</span>
<span class="normal">1854</span>
<span class="normal">1855</span>
<span class="normal">1856</span>
<span class="normal">1857</span>
<span class="normal">1858</span>
<span class="normal">1859</span>
<span class="normal">1860</span>
<span class="normal">1861</span>
<span class="normal">1862</span>
<span class="normal">1863</span>
<span class="normal">1864</span>
<span class="normal">1865</span>
<span class="normal">1866</span>
<span class="normal">1867</span>
<span class="normal">1868</span>
<span class="normal">1869</span>
<span class="normal">1870</span>
<span class="normal">1871</span>
<span class="normal">1872</span>
<span class="normal">1873</span>
<span class="normal">1874</span>
<span class="normal">1875</span>
<span class="normal">1876</span>
<span class="normal">1877</span>
<span class="normal">1878</span>
<span class="normal">1879</span>
<span class="normal">1880</span>
<span class="normal">1881</span>
<span class="normal">1882</span>
<span class="normal">1883</span>
<span class="normal">1884</span>
<span class="normal">1885</span>
<span class="normal">1886</span>
<span class="normal">1887</span>
<span class="normal">1888</span>
<span class="normal">1889</span>
<span class="normal">1890</span>
<span class="normal">1891</span>
<span class="normal">1892</span>
<span class="normal">1893</span>
<span class="normal">1894</span>
<span class="normal">1895</span>
<span class="normal">1896</span>
<span class="normal">1897</span>
<span class="normal">1898</span>
<span class="normal">1899</span>
<span class="normal">1900</span>
<span class="normal">1901</span>
<span class="normal">1902</span>
<span class="normal">1903</span>
<span class="normal">1904</span>
<span class="normal">1905</span>
<span class="normal">1906</span>
<span class="normal">1907</span>
<span class="normal">1908</span>
<span class="normal">1909</span>
<span class="normal">1910</span>
<span class="normal">1911</span>
<span class="normal">1912</span>
<span class="normal">1913</span>
<span class="normal">1914</span>
<span class="normal">1915</span>
<span class="normal">1916</span>
<span class="normal">1917</span>
<span class="normal">1918</span>
<span class="normal">1919</span>
<span class="normal">1920</span>
<span class="normal">1921</span>
<span class="normal">1922</span>
<span class="normal">1923</span>
<span class="normal">1924</span>
<span class="normal">1925</span>
<span class="normal">1926</span>
<span class="normal">1927</span>
<span class="normal">1928</span>
<span class="normal">1929</span>
<span class="normal">1930</span>
<span class="normal">1931</span>
<span class="normal">1932</span>
<span class="normal">1933</span>
<span class="normal">1934</span>
<span class="normal">1935</span>
<span class="normal">1936</span>
<span class="normal">1937</span>
<span class="normal">1938</span>
<span class="normal">1939</span>
<span class="normal">1940</span>
<span class="normal">1941</span>
<span class="normal">1942</span>
<span class="normal">1943</span>
<span class="normal">1944</span>
<span class="normal">1945</span>
<span class="normal">1946</span>
<span class="normal">1947</span>
<span class="normal">1948</span>
<span class="normal">1949</span>
<span class="normal">1950</span>
<span class="normal">1951</span>
<span class="normal">1952</span>
<span class="normal">1953</span>
<span class="normal">1954</span>
<span class="normal">1955</span>
<span class="normal">1956</span>
<span class="normal">1957</span>
<span class="normal">1958</span>
<span class="normal">1959</span>
<span class="normal">1960</span>
<span class="normal">1961</span>
<span class="normal">1962</span>
<span class="normal">1963</span>
<span class="normal">1964</span>
<span class="normal">1965</span>
<span class="normal">1966</span>
<span class="normal">1967</span>
<span class="normal">1968</span>
<span class="normal">1969</span>
<span class="normal">1970</span>
<span class="normal">1971</span>
<span class="normal">1972</span>
<span class="normal">1973</span>
<span class="normal">1974</span>
<span class="normal">1975</span>
<span class="normal">1976</span>
<span class="normal">1977</span>
<span class="normal">1978</span>
<span class="normal">1979</span>
<span class="normal">1980</span>
<span class="normal">1981</span>
<span class="normal">1982</span>
<span class="normal">1983</span>
<span class="normal">1984</span>
<span class="normal">1985</span>
<span class="normal">1986</span>
<span class="normal">1987</span>
<span class="normal">1988</span>
<span class="normal">1989</span>
<span class="normal">1990</span>
<span class="normal">1991</span>
<span class="normal">1992</span>
<span class="normal">1993</span>
<span class="normal">1994</span>
<span class="normal">1995</span>
<span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span>
<span class="normal">2015</span>
<span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span>
<span class="normal">2033</span>
<span class="normal">2034</span>
<span class="normal">2035</span>
<span class="normal">2036</span>
<span class="normal">2037</span>
<span class="normal">2038</span>
<span class="normal">2039</span>
<span class="normal">2040</span>
<span class="normal">2041</span>
<span class="normal">2042</span>
<span class="normal">2043</span>
<span class="normal">2044</span>
<span class="normal">2045</span>
<span class="normal">2046</span>
<span class="normal">2047</span>
<span class="normal">2048</span>
<span class="normal">2049</span>
<span class="normal">2050</span>
<span class="normal">2051</span>
<span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span>
<span class="normal">2071</span>
<span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span>
<span class="normal">2090</span>
<span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span>
<span class="normal">2107</span>
<span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span>
<span class="normal">2120</span>
<span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="ch">#!/usr/bin/env python</span>

<span class="c1"># -*- coding=utf-8 -*-</span>

<span class="c1">#</span>

<span class="c1"># Author: Ryan Henrichson, Timothy Nodine</span>

<span class="c1"># Version: 1.1.0</span>

<span class="c1"># Description: This is an object that contains/wraps a single command or other CommandContainers too support multiple</span>

<span class="c1"># commands. It is designed to be thread safe and has many helper functions designed to assist in working with commands</span>

<span class="c1"># in a threaded/network environment. It is highly customizable allowing for both a simple single command or to be part</span>

<span class="c1"># of a batch or queue. It also provides the ability for custom pre/post tasks which are functions to run specifically</span>

<span class="c1"># when failures are detected and tasks to run when commands complete.</span>

<span class="c1"># For more information review the README file found in the same directory as this.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">import</span> <span class="nn">traceback</span>

<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">import</span> <span class="nn">uuid</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">RLock</span><span class="p">,</span> <span class="n">Event</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">from</span> <span class="nn">sshConnector.sshLibs.sshChannelEnvironment</span> <span class="kn">import</span> <span class="n">EnvironmentControls</span>

<span class="kn">from</span> <span class="nn">PyLinuxDiagnosticToolKit.libs.LDTKExceptions</span> <span class="kn">import</span> <span class="n">SSHExceptionConn</span><span class="p">,</span> <span class="n">RequirementsException</span><span class="p">,</span> <span class="n">PreparserException</span><span class="p">,</span> \

    <span class="n">ExecutionException</span><span class="p">,</span> <span class="n">PostParserException</span><span class="p">,</span> <span class="n">SetFailureException</span><span class="p">,</span> <span class="n">CompletionTaskException</span><span class="p">,</span> <span class="n">TimeoutException</span><span class="p">,</span> \

    <span class="n">DataFormatException</span><span class="p">,</span> <span class="n">ForceCompleteException</span><span class="p">,</span> <span class="n">BetweenBitException</span><span class="p">,</span> <span class="n">TimeToFirstBitException</span>

<span class="kn">from</span> <span class="nn">PyMultiTasking</span> <span class="kn">import</span> <span class="n">safe_acquire</span><span class="p">,</span> <span class="n">safe_release</span><span class="p">,</span> <span class="n">method_wait</span><span class="p">,</span> <span class="n">MultiEvent</span><span class="p">,</span> <span class="n">PriorityTaskQueue</span><span class="p">,</span> <span class="n">Task</span>

<span class="kn">from</span> <span class="nn">PyMultiTasking.ThreadingUtils</span> <span class="kn">import</span> <span class="n">ThreadPool</span> <span class="k">as</span> <span class="n">Pool</span>

<span class="kn">from</span> <span class="nn">LinuxModules</span> <span class="kn">import</span> <span class="n">genericCmdModule</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Hashable</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Callable</span>

<span class="c1"># logging.basicConfig(format=&#39;%(asctime)s %(levelname)s %(name)s %(funcName)s %(lineno)s %(message)s&#39;,</span>

<span class="c1">#                     level=logging.INFO)</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;CommandContainers&#39;</span><span class="p">)</span>

<span class="c1"># Regex&#39;s used to pull command tags.</span>

<span class="c1"># ensure that data was returned</span>

<span class="n">matchRe</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;=^CMDSTART).+&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

<span class="c1"># clean up any errors or other data that may appear before the start tag</span>

<span class="n">startSubRe</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*?(?=^CMDSTART)&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

<span class="c1"># clean up all data after the end tag</span>

<span class="n">endSubRe</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;CMDEND.*&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CommandData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        This is where all the data associated with the Command is located.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_results</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_lastResults</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">failure</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">complete</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">running</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">parsed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">noParsing</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">children</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">parent</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">events</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">__PRIORITY__</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="n">__OBJECTLOCK__</span><span class="p">:</span> <span class="n">RLock</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">EnvironmentObject</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EnvironmentControls</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_EnvironmentObjectBackup</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EnvironmentControls</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">tki</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_tkiBackup</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_event</span><span class="p">:</span> <span class="n">MultiEvent</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_completionEvent</span><span class="p">:</span> <span class="n">Event</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_stopOnFailure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_timeoutExceptions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">rawResults</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MultiEvent</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                 <span class="n">noParsing</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stopOnFailure</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                 <span class="n">timeoutExceptions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; The bottom level parent. All other classes inherit this class down the chain.</span>

<span class="sd">        - :param timeout: This is the global timeout for encompassing all actions taken on or in this CommandObject.</span>

<span class="sd">        - :param root: This determines if root is required to run this command.</span>

<span class="sd">        - :param event: This provides a pre-existing event that will be set once the CommandObject is complete.</span>

<span class="sd">        - :param noParsing: do not parse results using the default methods</span>

<span class="sd">        - :param stopOnFailure: stop queue or unthreaded execution, or prevent completion tasks if an error occurs</span>

<span class="sd">        - :param timeoutExceptions: return an exception instead of None if something times out</span>

<span class="sd">        - :return:</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;runTimeout&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wait&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">300</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">300</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__LASTRESULTSLOCK__</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">noParsing</span> <span class="o">=</span> <span class="n">noParsing</span> <span class="ow">is</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_stopOnFailure</span> <span class="o">=</span> <span class="n">stopOnFailure</span> <span class="ow">is</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_timeoutExceptions</span> <span class="o">=</span> <span class="n">timeoutExceptions</span> <span class="ow">is</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tkiBackup</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tki&#39;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="k">if</span> <span class="n">root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">root</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">,</span> <span class="s1">&#39;arguments&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;runTimeout&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;runTimeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_event</span> <span class="o">=</span> <span class="n">MultiEvent</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">event</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">MultiEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="sd">        - :param event: (MultiEvent)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">Event</span><span class="p">):</span>

            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;event parement is not an Event&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">MultiEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;addEvent&#39; method.</span>

<span class="sd">        - :param event:</span>

<span class="sd">        - :return: bool</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="ow">and</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>

            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ForceCompleteException</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="sd">            Utility method to be used on a fully initialized command container.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Forcing completion for command object: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Parent forcing completion of child: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">child</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">child</span><span class="o">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setEvents</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">failure</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parsed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">complete</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_tkiBackup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_EnvironmentObjectBackup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>

    <span class="c1"># noinspection PyUnresolvedReferences</span>

    <span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="sd">            Utility method to be used on a fully initialized command container.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Resetting command object: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Parent resetting child: </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">child</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">child</span><span class="o">.</span><span class="n">resetContainers</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">failure</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parsed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">complete</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tkiBackup</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_EnvironmentObjectBackup</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span>

        <span class="k">except</span><span class="p">:</span>

            <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tki</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="sd">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_event</span> <span class="o">=</span> <span class="n">MultiEvent</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="n">child</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="p">)</span>

            <span class="n">child</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span>

            <span class="k">if</span> <span class="n">tki</span><span class="p">:</span>

                <span class="n">child</span><span class="o">.</span><span class="n">tki</span> <span class="o">=</span> <span class="n">tki</span>

            <span class="n">child</span><span class="o">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setEvents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This transverses the list of events known to this object and sets them. &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>

            <span class="n">item</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_isKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is a helper function for _parseCommand.</span>

<span class="sd">            It checks to see if the dictionary type object is a command or multiple commands.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="s1">&#39;command&#39;</span> <span class="ow">in</span> <span class="n">item</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_hasKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is a helper function for _parseCommand.</span>

<span class="sd">            It checks to see if the parent dictionary type object has custom functions.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;requirements&#39;</span><span class="p">,</span> <span class="s1">&#39;preparser&#39;</span><span class="p">,</span> <span class="s1">&#39;postparser&#39;</span><span class="p">,</span> <span class="s1">&#39;completiontask&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_needsKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is a helper function for _parseCommand.</span>

<span class="sd">            It checks to see if the parent dictionary type object needs updating to be suitable for use as kwargs.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_hasKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_isKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">and</span>

                                                    <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">CommandData</span><span class="o">.</span><span class="n">_hasKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_injectCommandKey</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Hashable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is a helper function for _processMultiItemIterable.</span>

<span class="sd">            It makes sure that commandKey is in kwargs because it is a requirement when creating a CommandObject.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;commandKey&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>

            <span class="n">item</span><span class="p">[</span><span class="s1">&#39;commandKey&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>

        <span class="k">return</span> <span class="n">item</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_isQue</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is a helper function for _parseCommand.</span>

<span class="sd">            Determines if the iterable datatype is a queue or a batch.</span>

<span class="sd">        - :return: bool: True if queue, False if batch</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">OrderedDict</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_createTags</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> \

            <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFormatException</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>

        <span class="sd">&quot;&quot;&quot; This is designed to add command tags to the beginning and end of a command.</span>

<span class="sd">            These tags help determine success and failure and also helps parse the output.</span>

<span class="sd">            The noParsing flag can stop this from being added.</span>

<span class="sd">            The idea here is that not all commands will run on bash.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">noParsing</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

                <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

                <span class="k">return</span> <span class="n">command</span>

            <span class="k">return</span> <span class="n">DataFormatException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The command is not formatted correctly: </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">command</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;echo CMDSTART.*echo CMDEND&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">):</span>

                    <span class="k">if</span> <span class="n">ignoreAlias</span><span class="p">:</span>

                        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;command &quot;</span> <span class="o">+</span> <span class="n">value</span>

                    <span class="n">command</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(.+)&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;COLUMNS=200; export COLUMNS; echo CMDSTART &amp;&amp; \1 &amp;&amp; echo CMDEND&#39;</span><span class="p">,</span>

                                          <span class="n">value</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

                <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">command</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;echo CMDSTART.*echo CMDEND&#39;</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">ignoreAlias</span><span class="p">:</span>

                <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;command &quot;</span> <span class="o">+</span> <span class="n">command</span>

            <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(.+)&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;COLUMNS=200; export COLUMNS; echo CMDSTART &amp;&amp; \1 &amp;&amp; echo CMDEND&#39;</span><span class="p">,</span>

                          <span class="n">command</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">command</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for results property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for results property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@results</span><span class="o">.</span><span class="n">setter</span>

    <span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="n">value</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_setEvents</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for results.setter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for results.setter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@results</span><span class="o">.</span><span class="n">deleter</span>

    <span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for results.deleter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for results.deleter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">lastResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__LASTRESULTSLOCK__</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lastResults</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for lastResults property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for lastResults property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@lastResults</span><span class="o">.</span><span class="n">setter</span>

    <span class="k">def</span> <span class="nf">lastResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__LASTRESULTSLOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_lastResults</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for lastResults.sette property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for lastResults.sette property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@lastResults</span><span class="o">.</span><span class="n">deleter</span>

    <span class="k">def</span> <span class="nf">lastResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__LASTRESULTSLOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_lastResults</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for lastResults.deleter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for lastResults.deleter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CommandParsers</span><span class="p">(</span><span class="n">CommandData</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This is where all standard and custom parsing goes. &quot;&quot;&quot;</span>

    <span class="n">_command</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_commandKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">customPostParser</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Parse the command and the commandKey that identifies the container.</span>

<span class="sd">        - :param command: The datatype of command depends on the behavior of the CommandObject.</span>

<span class="sd">                 If it is a string or a single length iterable, then the command becomes a string.</span>

<span class="sd">        - :param commandKey: The name of the command object.</span>

<span class="sd">                 This object might be bound to a class if created through the &#39;simpleExecute&#39; method.</span>

<span class="sd">                 In that case, this is also the variable name that gets bound.</span>

<span class="sd">                 This also helps determine its __hash__ and __str__ and __repr__.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CommandParsers</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_needsKwargs</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">commandKey</span><span class="p">:</span>

            <span class="n">commandKey</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findCmdAndKey</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span> <span class="o">=</span> <span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;command/type = </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_findCmdAndKey</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>

        <span class="k">for</span> <span class="n">cmdKey</span><span class="p">,</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">command</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="k">if</span> <span class="n">cmdKey</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;requirements&#39;</span><span class="p">,</span> <span class="s1">&#39;preparser&#39;</span><span class="p">,</span> <span class="s1">&#39;postparser&#39;</span><span class="p">,</span> <span class="s1">&#39;completiontask&#39;</span><span class="p">,</span> <span class="s1">&#39;onFail&#39;</span><span class="p">]:</span>

                <span class="k">return</span> <span class="n">cmdKey</span><span class="p">,</span> <span class="n">cmd</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_parseCommandInput</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Used by simpleExecute.</span>

<span class="sd">            Use it to retrieve a command object by name after using simpleExecute.</span>

<span class="sd">        - :param command: This can either be a str or a single item dict</span>

<span class="sd">        - :param commandKey:</span>

<span class="sd">        - :return: A tuple. First item is the key and the second item is the value</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">command</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">commandKey</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_parseCmdObjKey</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">()))</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">commandKey</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_parseCmdObjKey</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">commandKey</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

                <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_parseCmdObjKey</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">))</span>

        <span class="k">except</span><span class="p">:</span>

            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_parseCmdObjKey</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">()))</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_parseCmdObjKey</span><span class="p">(</span><span class="n">cmd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cmdKey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This static method is designed to parse the command key.</span>

<span class="sd">            The command key may be used as the name of this object if it is bound to another object.</span>

<span class="sd">            Namespaces have restrictions and cannot have certain characters.</span>

<span class="sd">            This static removes invalid characters.</span>

<span class="sd">            This is static so that it can be accessed outside of the class object</span>

<span class="sd">                allowing a programmer to use this anytime and ensure that the name is always the same.</span>

<span class="sd">        - :param cmd: The command variable from init</span>

<span class="sd">        - :param cmdKey: The commandkey variable from init</span>

<span class="sd">        - :return: str</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_replaceStringHelper</span><span class="p">(</span><span class="n">tmpStr</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">tmpStr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span> \

                <span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">cmd</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cmdKey</span><span class="p">:</span>

            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">cmdKey</span><span class="p">:</span>

            <span class="n">cmdKey</span> <span class="o">=</span> <span class="n">cmd</span>

        <span class="k">elif</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">cmdKey</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">cmdKey</span> <span class="o">%</span> <span class="n">_replaceStringHelper</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_replaceStringHelper</span><span class="p">(</span><span class="n">cmdKey</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_parseCommand</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is an designed to parse the command variable from init.</span>

<span class="sd">            It determines if the command is a single command or a queue or batch of commands.</span>

<span class="sd">            This is based on the command datatype and structure.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;command/type: </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_createTags</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_processSingleItemIterable</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_isQue</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>

                <span class="k">return</span> <span class="n">CommandParsers</span><span class="o">.</span><span class="n">_processMultiItemIterable</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">CommandParsers</span><span class="o">.</span><span class="n">_processMultiItemIterable</span><span class="p">(</span><span class="n">command</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_processSingleItemIterable</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is a helper function for &#39;_parseCommand&#39;.</span>

<span class="sd">            This is designed to handle an iterable that only has one command to run.</span>

<span class="sd">            The command is then run in this Object.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">set</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>

            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

            <span class="n">command</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>

            <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_createTags</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">noParsing</span><span class="p">,</span> <span class="n">ignoreAlias</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_processMultiItemIterable</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is a helper function for &#39;_parseCommand&#39;.</span>

<span class="sd">            This is designed to handle an iterable that has multiple commands to run.</span>

<span class="sd">            It creates new CommandContainers for each &#39;command&#39; that it iterates through.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">command</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="k">if</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_isKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>

                    <span class="n">item</span> <span class="o">=</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_injectCommandKey</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CommandContainer</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">))</span>

                <span class="k">else</span><span class="p">:</span>

                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CommandContainer</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">command</span><span class="p">:</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">CommandData</span><span class="o">.</span><span class="n">_isKwargs</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>

                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CommandContainer</span><span class="p">(</span><span class="o">**</span><span class="n">item</span><span class="p">))</span>

                <span class="k">else</span><span class="p">:</span>

                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CommandContainer</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">children</span>

    <span class="nd">@staticmethod</span>

    <span class="k">def</span> <span class="nf">_singleCommandParser</span><span class="p">(</span><span class="n">cmdResults</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is used specifically by _parseResults but also in all simple parsing functions.</span>

<span class="sd">            Parses only the output of a single command from a string.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmdResults</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">cmdResults</span>

        <span class="c1"># compile these up front one time for better performance on repeated calls</span>

        <span class="c1"># all this parsing helps us handle custom prompts and other weirdness better</span>

        <span class="n">cmdOutputRe</span> <span class="o">=</span> <span class="n">matchRe</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">startSubRe</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">cmdResults</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">cmdOutputRe</span><span class="p">:</span>

            <span class="n">output</span> <span class="o">=</span> <span class="n">endSubRe</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">cmdOutputRe</span><span class="o">.</span><span class="n">group</span><span class="p">(),</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>

                <span class="k">return</span> <span class="s1">&#39;&#39;</span>

            <span class="k">return</span> <span class="n">output</span>

        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for command property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for command property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@command</span><span class="o">.</span><span class="n">setter</span>

    <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This makes sure that command is parsed and calls _handleChildren() to take care of any children.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parseCommand</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">noParsing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ignoreAlias&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">set</span><span class="p">:</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">output</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">)</span>

                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="n">output</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for command.setter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for command.setter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@command</span><span class="o">.</span><span class="n">deleter</span>

    <span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_command</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for command.deleter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for command.deleter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">commandKey</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_commandKey</span>

    <span class="nd">@commandKey</span><span class="o">.</span><span class="n">setter</span>

    <span class="k">def</span> <span class="nf">commandKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This passes the value through _parseCommandInput() before applying the command key value.</span>

<span class="sd">            It requires that value be a tuple.</span>

<span class="sd">        :value: tuple</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_commandKey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parseCommandInput</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CommandRequirements</span><span class="p">(</span><span class="n">CommandParsers</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        This class handles the Requirements for a Command. It parses the provided requirements and the runRequirements</span>

<span class="sd">        method it has is called when the Requirement phase starts. Which is at the start of the execution. Requirements</span>

<span class="sd">        can either be a list, dict, or callable object.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">requirements</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">requirementTasks</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">requirementFailureVar</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">requirementIncompleteVar</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_requirementKeys</span><span class="p">:</span> <span class="nb">set</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_requirementResults</span><span class="p">:</span> <span class="n">OrderedDict</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">__REQUIREMENT_LOCK__</span><span class="p">:</span> <span class="n">RLock</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">requirements</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This init&#39;s job is too setup the requirements and make sure that they are correctly formatted.</span>

<span class="sd">        :param command: passing thru to the next container</span>

<span class="sd">        :param commandKey: passing thru to the next container</span>

<span class="sd">        :param requirements: takes this which can either be list, dict, or callable</span>

<span class="sd">        :param kwargs: passed thru to the next container</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__REQUIREMENT_LOCK__</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CommandRequirements</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;requirementsCondition&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;requirementsCondition&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">requirementIncompleteVar</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">requirements</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span> <span class="o">=</span> <span class="n">requirements</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_parseRequirements</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">runRequirements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is the only public method. It is called when the CommandContainer is being executed.</span>

<span class="sd">        :return: The output of _detectRequirementFailure which is either an exception or None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">:</span>

            <span class="n">reqTasks</span> <span class="o">=</span> <span class="n">PriorityTaskQueue</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementTasks</span><span class="p">:</span>

                <span class="n">reqTasks</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">req</span><span class="p">))</span>

            <span class="n">Pool</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="n">reqTasks</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detectRequirementFailure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementTasks</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parseRequirements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; This is called by __init__ and its job is to setup the requirements and make it ready for execution.</span>

<span class="sd">        - :return: None. An exception is raised if there is an error.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">:</span>

                <span class="k">return</span> <span class="kc">None</span>

            <span class="n">requirements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parseRequirementsHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>

                <span class="n">requirements</span> <span class="o">=</span> <span class="p">[</span><span class="n">requirements</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requirementTasks</span> <span class="o">=</span> <span class="n">requirements</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementTasks</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="p">):</span>

                <span class="k">raise</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The func keys for requirements does not match the number of &quot;</span>

                                            <span class="sa">f</span><span class="s2">&quot;requirementTasks</span><span class="se">\n</span><span class="s2">requirementKeys: &quot;</span>

                                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="si">}</span><span class="se">\n</span><span class="s2">requirementTasks: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementTasks</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([])</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Requirements setup failed: </span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] for _parseRequirements: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">raise</span> <span class="n">e</span>

    <span class="k">def</span> <span class="nf">_parseRequirementsHelper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawRequirements</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">partial</span><span class="p">],</span> <span class="n">partial</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; This is the work horse of the __init__/_parseRequirements methods.</span>

<span class="sd">            This is a recursive method that attempts to parse requirements and turn them into callable partials</span>

<span class="sd">                for the _requirementRunner method to be used by the Pool.</span>

<span class="sd">        - :param rawRequirements: can either be a list, dict, or callable.</span>

<span class="sd">        - :return: This is either a partial a list of partials or an Exception</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>

            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_parseRequirementsHelper</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">rawRequirements</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">))</span>

            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;requirementsFailureCondition&#39;</span><span class="p">):</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">str</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementsFailureCondition</span><span class="p">})</span>

            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementRunner</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">),</span> <span class="n">rawRequirements</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;failureVar&#39;</span> <span class="ow">in</span> <span class="n">rawRequirements</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">rawRequirements</span><span class="p">[</span><span class="s1">&#39;funcKey&#39;</span><span class="p">]:</span> <span class="n">rawRequirements</span><span class="p">[</span><span class="s1">&#39;failureVar&#39;</span><span class="p">]})</span>

        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;requirementsFailureCondition&#39;</span><span class="p">):</span>

            <span class="k">try</span><span class="p">:</span>  <span class="c1"># dict of any length</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>

                    <span class="p">{</span><span class="n">rawRequirements</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;funcKey&#39;</span><span class="p">,</span> <span class="n">rawRequirements</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]):</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementsFailureCondition</span><span class="p">})</span>

            <span class="k">except</span><span class="p">:</span>  <span class="c1"># callable object</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="nb">str</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementsFailureCondition</span><span class="p">})</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

                <span class="n">funcKey</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rawRequirements</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">funcKey</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementRunner</span><span class="p">,</span> <span class="n">funcKey</span><span class="p">,</span> <span class="n">rawRequirements</span><span class="p">[</span><span class="n">funcKey</span><span class="p">],</span> <span class="mf">0.1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>

                <span class="k">if</span> <span class="s1">&#39;funcKey&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rawRequirements</span> <span class="ow">or</span> <span class="s1">&#39;func&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rawRequirements</span><span class="p">:</span>

                    <span class="k">raise</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="s2">&quot;Invalid requirements format&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">requirementIncompleteVar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>

                    <span class="p">{</span><span class="n">rawRequirements</span><span class="p">[</span><span class="s1">&#39;funcKey&#39;</span><span class="p">]:</span> <span class="n">rawRequirements</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;incompleteVar&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)})</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rawRequirements</span><span class="p">[</span><span class="s1">&#39;funcKey&#39;</span><span class="p">])</span>

                <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementRunner</span><span class="p">,</span> <span class="o">**</span><span class="n">rawRequirements</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="s2">&quot;Invalid requirements format&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_requirementRunner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">funcKey</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">incompleteVar</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                           <span class="n">raiseExc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Created by the _parseRequirementsHelper method and passed to the Pool for threading.</span>

<span class="sd">            This takes the results of methodWait from Pool and stores the output in requirementResults.</span>

<span class="sd">        - :param funcKey: This is used as the key associated with the output for requirementResults.</span>

<span class="sd">        - :param func: The callable that will be passed to methodWait.</span>

<span class="sd">        - :param delay: How long in between runs</span>

<span class="sd">        - :param incompleteVar: The variable used to determine if the &#39;func&#39; being called has finished</span>

<span class="sd">        - :param raiseExc: Tells methodWait whether or not to raise or return an exception if an exception occurs</span>

<span class="sd">        - :param args: passed to methodWait and then to the &#39;func&#39;</span>

<span class="sd">        - :param kwargs: passed to methodWait and then to the &#39;func&#39;. However it may container failureVar which is</span>

<span class="sd">                pulled from kwargs and used as a control for methodWait.</span>

<span class="sd">        - :return: None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;this&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">funcKey</span><span class="p">:</span> <span class="n">method_wait</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span>

                                                             <span class="n">incompleteVar</span><span class="o">=</span><span class="n">incompleteVar</span><span class="p">,</span> <span class="n">raiseExc</span><span class="o">=</span><span class="n">raiseExc</span><span class="p">,</span>

                                                             <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)})</span>

    <span class="k">def</span> <span class="nf">_detectRequirementFailure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requirements</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; This attempts to detect if there was a failure in the requirements.</span>

<span class="sd">            Checks to see if requirementResults exists.</span>

<span class="sd">            Then checks requirementResults for length against the original requirements.</span>

<span class="sd">            This can be different if an exception occurred and _requirementRunner did not update requirementResults.</span>

<span class="sd">            Lastly it checks all the results as follows:</span>

<span class="sd">                Results are an exception.</span>

<span class="sd">                Results are equal to incompleteVar (did not finish).</span>

<span class="sd">                Was failureVar provided and if do are results equal to it.</span>

<span class="sd">            All failures are collected into a single RequirementsException.</span>

<span class="sd">        - :param requirements: This is the requirementTasks which is a list of callables.</span>

<span class="sd">        - :return: None or Exception</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ERROR: Requirements results are empty&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="s2">&quot;Requirements results are empty&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An Exception occurred within the requirements: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">DataFormatException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The requirementsResults should be a dict but instead are &quot;</span>

                                       <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">requirements</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">):</span>

            <span class="n">missingReq</span> <span class="o">=</span> <span class="nb">set</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_requirementKeys</span><span class="p">,</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Missing requirements results after execution: </span><span class="si">{</span><span class="n">missingReq</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requirements did not complete: </span><span class="si">{</span><span class="n">missingReq</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="p">:</span>

            <span class="n">failedReqs</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">funcKey</span><span class="p">,</span> <span class="n">results</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementResults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="n">failureVar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">funcKey</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

                <span class="n">incompleteVar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementIncompleteVar</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">funcKey</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">)</span> <span class="ow">or</span> \

                        <span class="n">results</span> <span class="ow">is</span> <span class="n">incompleteVar</span> <span class="ow">or</span> \

                        <span class="n">funcKey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">requirementFailureVar</span> <span class="ow">and</span> <span class="n">results</span> <span class="ow">is</span> <span class="n">failureVar</span><span class="p">:</span>

                    <span class="n">failedReqs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">funcKey</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">failedReqs</span><span class="p">:</span>

                <span class="k">return</span> <span class="n">RequirementsException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requirements failed: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">failedReqs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setRequirementsFailureCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">requirementsFailureCondition</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This will be checked against the results of the requirements to determine if a failure occurred.</span>

<span class="sd">            This MUST be set before running the command and executing the command object.</span>

<span class="sd">            To allow a default failure condition in addition to an exception to define requirements success or failure</span>

<span class="sd">                and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not</span>

<span class="sd">                exist and the absence of the attribute will prevent anything other than an exception from being used.</span>

<span class="sd">            However, the current default value is None to allow for backward compatibility.</span>

<span class="sd">        - :param requirementsFailureCondition:</span>

<span class="sd">        - :return: None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">requirementsFailureCondition</span> <span class="o">=</span> <span class="n">requirementsFailureCondition</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">requirementResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Wraps requirementResults with a lock.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__REQUIREMENT_LOCK__</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_requirementResults</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for requirementResults property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for requirementResults property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@requirementResults</span><span class="o">.</span><span class="n">setter</span>

    <span class="k">def</span> <span class="nf">requirementResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__REQUIREMENT_LOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_requirementResults</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for requirementResults.setter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for requirementResults.setter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="nd">@requirementResults</span><span class="o">.</span><span class="n">deleter</span>

    <span class="k">def</span> <span class="nf">requirementResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__REQUIREMENT_LOCK__</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_requirementResults</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ERROR: for requirementResults.deleter property: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;[DEBUG] for requirementResults.deleter property: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># noinspection PyMethodMayBeStatic,PyUnusedLocal</span>

<span class="k">class</span> <span class="nc">CommandSetup</span><span class="p">(</span><span class="n">CommandRequirements</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        This is where the setup before running the command occurs.</span>

<span class="sd">        Requirements and the preparser are executed here.</span>

<span class="sd">        This also does the preliminary checking to ensure commands can be run.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">preparser</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                 <span class="n">postparser</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">onFail</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                 <span class="n">completiontask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CommandSetup</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">commandKey</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">preparser</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span> <span class="o">=</span> <span class="n">preparser</span>

        <span class="k">if</span> <span class="n">postparser</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_postparser</span> <span class="o">=</span> <span class="n">postparser</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">customPostParser</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">onFail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_onFailure</span> <span class="o">=</span> <span class="n">onFail</span>

        <span class="k">if</span> <span class="n">completiontask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_onComplete</span> <span class="o">=</span> <span class="n">completiontask</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">customPostParser</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_preparser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Placeholder for custom command preparser.</span>

<span class="sd">            All parsers MUST accept *args and **kwargs.</span>

<span class="sd">            Must return bool value or None (None means Failure).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_postparser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">this</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Placeholder for custom command parser.</span>

<span class="sd">            All parsers MUST accept **kwargs.</span>

<span class="sd">            May be a single function or method or a list thereof.</span>

<span class="sd">            Must return results or None (None means Failure).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">_onFailure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">this</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;  Standard on fail method and a placeholder for a custom on fail method  &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">_onComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">this</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Placeholder for custom onComplete function.</span>

<span class="sd">            This is called by performComplete which is called by the exit magic function.</span>

<span class="sd">        :return: bool: True or False</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">runCommandSetup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; Checks to make sure it is possible to run a command either via</span>

<span class="sd">            a EnvironmentObject or the ToolKitInterface</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;EnvironmentObject&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ERROR: ToolKitInterface and EnvironmentObject not found&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">ExecutionException</span><span class="p">(</span><span class="s1">&#39;ToolKitInterface and EnvironmentObject not found&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This checks to see if there are any requirements before this command can be executed.</span>

<span class="sd">            If there are, the requirements are executed in a batch using _requirementsRunner.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_EnvironmentObjectBackup</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;EnvironmentObject&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="o">.</span><span class="n">commandObject</span> <span class="o">=</span> <span class="bp">self</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="o">.</span><span class="n">becomeRoot</span><span class="p">()</span>

        <span class="k">if</span> <span class="s1">&#39;tki&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tkiBackup</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tki&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_preparserRunner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>

                <span class="n">preparResults</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="k">for</span> <span class="n">prepar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">:</span>

                    <span class="n">preparResults</span> <span class="o">=</span> <span class="n">prepar</span><span class="p">(</span><span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">preparResults</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">(</span><span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR in _preparserRunner: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] for _preparserRunner: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">PreparserException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CommandContainer</span><span class="p">(</span><span class="n">CommandSetup</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; This is most of the logic/work is done.</span>

<span class="sd">        Note that this object is automatically created as an inherited class via CommandContainer below.</span>

<span class="sd">        Type checks are also automatically performed during execution that require this structure.</span>

<span class="sd">        This may be cleaned up at some point but there are no issues due to it so it is low priority.</span>

<span class="sd">        Just remember to use CommandContainer if manually creating CommandObjects.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">startTime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">endTime</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; This class has nothing to do here. It is the work horse not the _setup().</span>

<span class="sd">            Main user functions (aside from context manager):</span>

<span class="sd">                executor()</span>

<span class="sd">                waitForResults()</span>

<span class="sd">                forceComplete()</span>

<span class="sd">                resetContainers()</span>

<span class="sd">            Other public functions usually not directly accessed by a user:</span>

<span class="sd">                setLastResults()</span>

<span class="sd">                checkResults() (used by setLastResults())</span>

<span class="sd">                setFailure() (called from setLastResults())</span>

<span class="sd">                performComplete()</span>

<span class="sd">                finalizeExecution()</span>

<span class="sd">            Note that methods are clustered closest to other dependent methods to promote better reading flow.</span>

<span class="sd">            Statics and privates are mixed in with publics, but properties are always at the bottom and magics on top.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting up CommandContainer&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CommandContainer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">safe_acquire</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">return</span> <span class="bp">self</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: CommandObject waitLock failed with timeout: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[DEBUG] for CommandOBject waitLock: </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject failed to obtain lock within the timeframe: &quot;</span>

                               <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>

        <span class="n">safe_release</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__OBJECTLOCK__</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">complete</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject completed: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommandContainer</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is the main function run in order to execute command(s).</span>

<span class="sd">            It requires that the EnvironmentObject and/or the tki variable be set.</span>

<span class="sd">            This is normally run after _setup() and is called from within _exeThread().</span>

<span class="sd">            Steps:</span>

<span class="sd">            1. Ensure the CommandObject is executable.</span>

<span class="sd">            2. Requirements run and return None or an exception.</span>

<span class="sd">            2. Preparser runs and returns whatever.</span>

<span class="sd">            4. Execution of the command structure occurs and commands are executed and results returned.</span>

<span class="sd">            5. Postparser runs using lastResults and returns the updated results.</span>

<span class="sd">            6. Completion task runs using lastResults and returns nothing but can run setFailure() for stopOnFailure.</span>

<span class="sd">            7. Finalization occurs moving lastResults to results and setting all remaining events.</span>

<span class="sd">        - :return: a copy of this container</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; ===== CommandObject executor running with command and children: &quot;</span>

                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">commandKey</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">]</span><span class="si">}</span><span class="s2"> ===== &quot;</span><span class="p">)</span>

            <span class="c1"># Run requirements and preparser and abort if an exception is found</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runCommandSetup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)):</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runRequirements</span><span class="p">(),</span> <span class="n">phase</span><span class="o">=</span><span class="s1">&#39;requirements&#39;</span><span class="p">):</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparserRunner</span><span class="p">(),</span> <span class="n">phase</span><span class="o">=</span><span class="s1">&#39;preparser&#39;</span><span class="p">):</span>

                        <span class="c1"># Decision tree for which mode to execute in. Threaded/UnThreaded or unknown</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorThreadHelper</span><span class="p">(),</span> <span class="n">phase</span><span class="o">=</span><span class="s1">&#39;execution&#39;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorUnThreadedHelper</span><span class="p">(),</span> <span class="n">phase</span><span class="o">=</span><span class="s1">&#39;execution&#39;</span><span class="p">)</span>

                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Y U NO SSH or whatever thing of error</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorFailure</span><span class="p">())</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># any unexpected exceptions could be anywhere in the process</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_processException</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="k">finally</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">finalizeExecution</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_executorThreadHelper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; Attempts to execute threaded commands in a batch or a queue, or a single threaded command.</span>

<span class="sd">        - :return: string for single command, dict for multiple commands, exception on error</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject has one threaded command: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> with kwargs: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="o">.</span><span class="n">executeOnEnvironment</span><span class="p">(</span><span class="n">cmd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject has threaded children: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">set</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject running batched children: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executorHelper</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject running queued children: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executorHelper</span><span class="p">(</span><span class="n">_queue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: CommandObject format of child data is invalid: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">DataFormatException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject format of child data is invalid: &#39;</span>

                                       <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executorFailure</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_executorUnThreadedHelper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; Attempts to execute on the main ssh channel one command at a time.</span>

<span class="sd">        - :return: string for single command, dict for multiple commands, exception on error</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject has one unthreaded command: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="o">.</span><span class="n">sshCon</span><span class="o">.</span><span class="n">mainEnvironment</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="o">.</span><span class="n">sshCon</span><span class="o">.</span><span class="n">executeOnEnvironment</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject has unthreaded children: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executorHelper</span><span class="p">(</span><span class="n">threading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_executorFailure</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_executorHelper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_queue</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; Designed to be a helper for _executorUnThreadedHelper() and _executorThreadHelper() for multiple commands.</span>

<span class="sd">            It is designed to help execute children.</span>

<span class="sd">            An unthreaded batch (unordered iterable data type only):</span>

<span class="sd">                stopOnFailure has no effect here and will be checked when waiting for results</span>

<span class="sd">            A threaded queue (ordered iterable data type, requires _timeout only):</span>

<span class="sd">                will return an exception if stopOnFailure is set,</span>

<span class="sd">                    incomplete children will have required events set on containers to prevent hanging and waiting</span>

<span class="sd">            An unthreaded queue (_executorHelperhreading set to False, no _timeout):</span>

<span class="sd">                will return an exception if stopOnFailure is set,</span>

<span class="sd">                    incomplete children will have required events set on containers to prevent hanging and waiting</span>

<span class="sd">        - :return: dict, exception on error if _stopOnFailure or _timeoutExceptions are true</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ExecutorHelper _queue = </span><span class="si">{</span><span class="n">_queue</span><span class="si">}</span><span class="s1"> and threading = </span><span class="si">{</span><span class="n">threading</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">_queue</span><span class="p">:</span>

            <span class="n">exHelperTimeout</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">timeout</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">])</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">exHelperTimeout</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">timeout</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">])</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="n">_endTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="n">exHelperTimeout</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Looping through the childern with _endTime = </span><span class="si">{</span><span class="n">_endTime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running child: </span><span class="si">{</span><span class="n">child</span><span class="o">.</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">_endTime</span> <span class="o">&lt;=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">():</span>

                <span class="k">return</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Batch execution timed out before child command: &#39;</span>

                                        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">child</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">_queue</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;EnvironmentObject&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">&#39;EnvironmentObject&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">kwargs</span><span class="p">):</span>

                <span class="n">child</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;EnvironmentObject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;EnvironmentObject&#39;</span><span class="p">]</span>

            <span class="n">genericCmdModule</span><span class="o">.</span><span class="n">GenericCmdModule</span><span class="o">.</span><span class="n">simpleExecutor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">child</span><span class="o">.</span><span class="n">commandKey</span><span class="p">,</span> <span class="n">tki</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="p">,</span>

                                                             <span class="n">threading</span><span class="o">=</span><span class="n">threading</span><span class="p">,</span> <span class="o">**</span><span class="n">child</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">_queue</span> <span class="ow">or</span> <span class="n">threading</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>  <span class="c1"># wait for each child in a queue</span>

                <span class="n">child</span><span class="o">.</span><span class="n">waitForResults</span><span class="p">(</span><span class="n">_endTime</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

                <span class="c1"># stopOnFailure only matters here if unthreaded or a queue to avoid waiting on each batch item</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stopOnFailure</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">failure</span><span class="p">:</span>

                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Child command failed and stopped queue execution: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">child</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="k">return</span> <span class="n">ExecutionException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Child command failed and stopped queue execution: &#39;</span>

                                              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">child</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># wait for the batch to fully complete and always return the results for every scenario</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_waitForChildren</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="n">_endTime</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_executorFailure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Simply returns an exception when the executor encounters a (usually) internal issue. &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject received no command or children: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">ExecutionException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject received no command or children: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to determine execution mode for CommandObject: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ExecutionException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Failed to determine execution mode for CommandObject: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">waitForResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; This is designed to wait until the command object is finished executing the command and parsing the results.</span>

<span class="sd">        - :param wait: use when the command object has children, defaults to the timeout attribute of the container</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">wait</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">wait</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wait&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="k">if</span> <span class="n">wait</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>

            <span class="n">wait</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait</span><span class="p">):</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait</span><span class="p">):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeoutExceptions</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Command timed out waiting for results: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_waitForChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="ne">Exception</span><span class="p">]:</span>

        <span class="sd">&quot;&quot;&quot; Private method to wait for just the children so the parent knows when to proceed &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">wait</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="n">wait</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wait&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="k">if</span> <span class="n">wait</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>

            <span class="n">wait</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">wait</span><span class="p">):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeoutExceptions</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Child commands timed out waiting for results: &#39;</span>

                                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">resultsOrigin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>

                       <span class="n">phase</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This sets lastResults on the current object and tells the parent to do the same if a parent exists.</span>

<span class="sd">        - :param results: value used to set lastResults</span>

<span class="sd">        - :param resultsOrigin: name of the child command container if called by a child</span>

<span class="sd">        - :param phase:</span>

<span class="sd">        - :return: boolean value: True for success and False for failure found in the results</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkResults</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>

            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setFailure</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">resultsOrigin</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">resultsOrigin</span><span class="p">:</span> <span class="n">results</span><span class="p">})</span>

            <span class="k">except</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span> <span class="o">=</span> <span class="p">{</span><span class="n">resultsOrigin</span><span class="p">:</span> <span class="n">results</span><span class="p">}</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span> <span class="o">=</span> <span class="n">results</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">phase</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CommandObject timed out during phase: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">raise</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CommandObject timed out during phase: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure</span><span class="p">:</span>

            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">checkResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmdData</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; Check the cmdData (results) at any time to see if they are an exception.</span>

<span class="sd">        - :param cmdData: the results of the command at any point in the process</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stopOnFailure</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmdData</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>

            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">failure</span><span class="p">]:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;All children failed: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">setFailure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; The method is run if a failure was detected somewhere in the process.</span>

<span class="sd">            This process also kicks off the custom onFailure method.</span>

<span class="sd">        - :param results: results of the command or failure</span>

<span class="sd">        - :return: results of custom failure method or an exception</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A failure occurred for Command: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The raw failure results are: </span><span class="si">{</span><span class="n">results</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onFailure</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Exception when setting failure for command: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The raw failure results are: </span><span class="si">{</span><span class="n">results</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">SetFailureException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>

        <span class="k">finally</span><span class="p">:</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">forceComplete</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">failure</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_parseResults</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This method is designed to do the reverse of the _createTags from CommandData</span>

<span class="sd">                except to the results of the command itself.</span>

<span class="sd">            It also calls the custom parser.</span>

<span class="sd">        - :return: the value of &#39;self.results&#39; or Exception</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">noParsing</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>

                <span class="n">results</span> <span class="o">=</span> <span class="n">CommandContainer</span><span class="o">.</span><span class="n">_singleCommandParser</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawResults</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">rawResults</span> <span class="o">=</span> <span class="n">results</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">customPostParser</span><span class="p">:</span>

                <span class="k">return</span> <span class="n">results</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postparser</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>

                <span class="k">for</span> <span class="n">pparser</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postparser</span><span class="p">:</span>

                    <span class="n">results</span> <span class="o">=</span> <span class="n">pparser</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">results</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postparser</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Postparser exception: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postparser</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stack Trace: </span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">PostParserException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>

        <span class="k">finally</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">parsed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">performComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; This is called by the __exit__ function and attempts to run a custom onComplete function.</span>

<span class="sd">        - :return: bool, results, or raises an exception on error</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_completionEvent</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">customPostParser</span><span class="p">:</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onComplete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Completion task exception: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onComplete</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stack Trace:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">CompletionTaskException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">finalizeExecution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommandContainer</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            This is the final wrap up step for the execution process and occurs only after the current object is done</span>

<span class="sd">            Moves lastResults to results and sets the event for the current object.</span>

<span class="sd">                Current event may be a shared multievent shared across parents and children.</span>

<span class="sd">            lastResults is then cleared.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stopOnFailure</span><span class="p">:</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">failure</span><span class="p">:</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parseResults</span><span class="p">()):</span>

                        <span class="bp">self</span><span class="o">.</span><span class="n">performComplete</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parseResults</span><span class="p">())</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">performComplete</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_processException</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="k">finally</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">lastResults</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_processException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot; General exception processor for errors during execution &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_disconnectHelper</span><span class="p">():</span>

            <span class="k">try</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Disconnecting SSH connection due to a failure&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tki</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="p">:</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">tki</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="p">:</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="o">.</span><span class="n">disconnectEnvironment</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">secondaryException</span><span class="p">:</span>

                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An unknown error occurred while attempting to disconnect: &quot;</span>

                          <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">Error: </span><span class="si">{</span><span class="n">secondaryException</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">secondaryException</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">DataFormatException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The object provided is not an exception: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">objectType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">objectType</span> <span class="o">==</span> <span class="n">SSHExceptionConn</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;CONNECTION ERROR: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;This usually occurs when the SSH connection is prematurely severed.&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The preRunner failed for CommandObject with preparser and requirements: &#39;</span>

                      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">)</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">e</span> <span class="o">=</span> <span class="n">_disconnectHelper</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">objectType</span> <span class="o">==</span> <span class="n">TimeToFirstBitException</span> <span class="ow">or</span> <span class="n">objectType</span> <span class="o">==</span> <span class="n">BetweenBitException</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error receiving data from buffer after command was sent. &quot;</span>

                      <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The preRunner failed for CommandObject with preparser and requirements: &#39;</span>

                      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">)</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">e</span> <span class="o">=</span> <span class="n">_disconnectHelper</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">objectType</span> <span class="o">==</span> <span class="ne">RuntimeError</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;A runtime error occurred when attempting to gain the lock on an object</span><span class="se">\n</span><span class="s1">&#39;</span>

                      <span class="sa">f</span><span class="s1">&#39;The commandKey is: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="se">\n</span><span class="s1">The preparser is: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>

                      <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">The requirements are: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred trying to gain the lock of the Object: &quot;</span>

                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error occurred: </span><span class="si">{</span><span class="n">objectType</span><span class="si">}</span><span class="se">\n</span><span class="s1">The commandKey is: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>

                      <span class="sa">f</span><span class="s1">&#39;The preparser is: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparser</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">The requirements are: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">requirements</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error occurred: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commandKey</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">e</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">executionLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">endTime</span><span class="p">:</span>

                <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endTime</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">startTime</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>

            <span class="k">return</span> <span class="mf">0.0</span>
</code></pre></div>
</td></tr></table>
</details>
<h2 id="variables">Variables</h2>
<div class="codehilite"><pre><span></span><code><span class="n">endSubRe</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">log</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">matchRe</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">startSubRe</span>
</code></pre></div>

<h2 id="classes">Classes</h2>
<h3 id="commandcontainer">CommandContainer</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CommandContainer</span><span class="p">(</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>CommandContainers.CommandSetup</li>
<li>CommandContainers.CommandRequirements</li>
<li>CommandContainers.CommandParsers</li>
<li>CommandContainers.CommandData</li>
</ul>
<h4 id="class-variables">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">EnvironmentObject</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">args</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">children</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">complete</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">customPostParser</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">endTime</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">events</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">failure</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">kwargs</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">noParsing</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parent</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parsed</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">rawResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementFailureVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementIncompleteVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementTasks</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirements</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">root</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">startTime</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">timeout</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">tki</span>
</code></pre></div>

<h4 id="instance-variables">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">command</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">commandKey</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">executionLength</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">lastResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementResults</span>
</code></pre></div>

<p>Wraps requirementResults with a lock.</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span>
</code></pre></div>

<h4 id="methods">Methods</h4>
<h4 id="addevent">addEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will add a new event if it does not already have it.</p>
<ul>
<li>:param event: (MultiEvent)</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">addEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="s">        - :param event: (MultiEvent)</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="nf">event</span><span class="p">,</span><span class="w"> </span><span class="nf">Event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span><span class="p">(</span><span class="s">&#39;event parement is not an Event&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="checkresults">checkResults</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">checkResults</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">cmdData</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>Check the cmdData (results) at any time to see if they are an exception.</p>
<ul>
<li>:param cmdData: the results of the command at any point in the process</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">checkResults</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="n">cmdData</span><span class="o">:</span><span class="w"> </span><span class="kr">Any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Check the cmdData (results) at any time to see if they are an exception.</span>

<span class="s">        - :param cmdData: the results of the command at any point in the process</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">_stopOnFailure</span><span class="w"> </span><span class="kr">or</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="p">)</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="n">cmdData</span><span class="p">,</span><span class="w"> </span><span class="n">Exception</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="kr">failure</span><span class="p">]</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;All children failed: {self.commandKey} : {self.children}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="executor">executor</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">executor</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;CommandContainer&#39;</span>
</code></pre></div>

<p>This is the main function run in order to execute command(s).</p>
<p>It requires that the EnvironmentObject and/or the tki variable be set.
    This is normally run after _setup() and is called from within _exeThread().
    Steps:
    1. Ensure the CommandObject is executable.
    2. Requirements run and return None or an exception.
    2. Preparser runs and returns whatever.
    4. Execution of the command structure occurs and commands are executed and results returned.
    5. Postparser runs using lastResults and returns the updated results.
    6. Completion task runs using lastResults and returns nothing but can run setFailure() for stopOnFailure.
    7. Finalization occurs moving lastResults to results and setting all remaining events.</p>
<ul>
<li>:return: a copy of this container</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">CommandContainer</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot; This is the main function run in order to execute command(s).</span>

<span class="sd">            It requires that the EnvironmentObject and/or the tki variable be set.</span>

<span class="sd">            This is normally run after _setup() and is called from within _exeThread().</span>

<span class="sd">            Steps:</span>

<span class="sd">            1. Ensure the CommandObject is executable.</span>

<span class="sd">            2. Requirements run and return None or an exception.</span>

<span class="sd">            2. Preparser runs and returns whatever.</span>

<span class="sd">            4. Execution of the command structure occurs and commands are executed and results returned.</span>

<span class="sd">            5. Postparser runs using lastResults and returns the updated results.</span>

<span class="sd">            6. Completion task runs using lastResults and returns nothing but can run setFailure() for stopOnFailure.</span>

<span class="sd">            7. Finalization occurs moving lastResults to results and setting all remaining events.</span>

<span class="sd">        - :return: a copy of this container</span>

<span class="sd">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="nb">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot; ===== CommandObject executor running with command and children: &quot;</span><span class="w"></span>

<span class="w">                      </span><span class="n">f</span><span class="s2">&quot;{self.commandKey} : {self.command} : {[c.commandKey for c in self.children]} ===== &quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="c1"># Run requirements and preparser and abort if an exception is found</span><span class="w"></span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runCommandSetup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)):</span><span class="w"></span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runRequirements</span><span class="p">(),</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="s1">&#39;requirements&#39;</span><span class="p">):</span><span class="w"></span>

<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preparserRunner</span><span class="p">(),</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="s1">&#39;preparser&#39;</span><span class="p">):</span><span class="w"></span>

<span class="w">                        </span><span class="c1"># Decision tree for which mode to execute in. Threaded/UnThreaded or unknown</span><span class="w"></span>

<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">None</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                            </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorThreadHelper</span><span class="p">(),</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="s1">&#39;execution&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                        </span><span class="k">elif</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="p">:</span><span class="w"></span>

<span class="w">                            </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorUnThreadedHelper</span><span class="p">(),</span><span class="w"> </span><span class="n">phase</span><span class="o">=</span><span class="s1">&#39;execution&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                        </span><span class="k">else</span><span class="p">:</span><span class="w">  </span><span class="c1"># Y U NO SSH or whatever thing of error</span><span class="w"></span>

<span class="w">                            </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executorFailure</span><span class="p">())</span><span class="w"></span>

<span class="w">        </span><span class="n">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">e</span><span class="p">:</span><span class="w">  </span><span class="c1"># any unexpected exceptions could be anywhere in the process</span><span class="w"></span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_processException</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="n">finally</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="bp">self</span><span class="o">.</span><span class="n">endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">finalizeExecution</span><span class="p">()</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="finalizeexecution">finalizeExecution</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">finalizeExecution</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;CommandContainer&#39;</span>
</code></pre></div>

<p>This is the final wrap up step for the execution process and occurs only after the current object is done</p>
<p>Moves lastResults to results and sets the event for the current object.
    Current event may be a shared multievent shared across parents and children.
lastResults is then cleared.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">finalizeExecution</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">CommandContainer</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot;</span>

<span class="s">            This is the final wrap up step for the execution process and occurs only after the current object is done</span>

<span class="s">            Moves lastResults to results and sets the event for the current object.</span>

<span class="s">                Current event may be a shared multievent shared across parents and children.</span>

<span class="s">            lastResults is then cleared.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_stopOnFailure</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="o">:</span><span class="w"></span>

<span class="w">                    </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">_parseResults</span><span class="p">())</span><span class="o">:</span><span class="w"></span>

<span class="w">                        </span><span class="kr">self</span><span class="p">.</span><span class="n">performComplete</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="n">else</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="kr">self</span><span class="p">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">_parseResults</span><span class="p">())</span><span class="w"></span>

<span class="w">                </span><span class="kr">self</span><span class="p">.</span><span class="n">performComplete</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">e</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">_processException</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="n">finally</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">lastResults</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">lastResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="forcecomplete">forceComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;ForceCompleteException&#39;</span>
</code></pre></div>

<p>Force completion for the parent container and all children without changing the results.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">forceComplete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">ForceCompleteException</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="ss">            Utility method to be used on a fully initialized command container.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Forcing completion for command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Parent forcing completion of child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setEvents</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="handlechildren">handleChildren</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tki</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This function is called once the CommandObject is done setting up children if it has any.</p>
<p>It makes sure the children are aware of it as the parent and of tki of the parent.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">handleChildren</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="ss">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">children</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tki</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="hasevent">hasEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This checks to see if the specified event exists or not. This is mainly used by 'addEvent' method.</p>
<ul>
<li>:param event:</li>
<li>:return: bool</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">hasEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;</span><span class="n">addEvent</span><span class="s">&#39; method.</span>

<span class="s">        - :param event:</span>

<span class="s">        - :return: bool</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="nf">event</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="performcomplete">performComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">performComplete</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Any&#39;</span>
</code></pre></div>

<p>This is called by the <strong>exit</strong> function and attempts to run a custom onComplete function.</p>
<ul>
<li>:return: bool, results, or raises an exception on error</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">performComplete</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Any</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This is called by the __exit__ function and attempts to run a custom onComplete function.</span>

<span class="s">        - :return: bool, results, or raises an exception on error</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">is_set</span><span class="p">()</span><span class="w"> </span><span class="kr">or</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">customPostParser</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">lastResults</span><span class="w"> </span><span class="kr">or</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_onComplete</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">lastResults</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="o">=</span><span class="kr">self</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">e</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Completion task exception: {self.commandKey} : {str(self._onComplete)}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Stack Trace:\n {traceback.format_exc()}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="n">CompletionTaskException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="resetcontainers">resetContainers</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>Reset the command containers to a usable state wth all previous settings.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">resetContainers</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="s">            Utility method to be used on a fully initialized command container.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Resetting command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Parent resetting child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">resetContainers</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">pass</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="runcommandsetup">runCommandSetup</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">runCommandSetup</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Optional[Exception]&#39;</span>
</code></pre></div>

<p>Checks to make sure it is possible to run a command either via</p>
<p>a EnvironmentObject or the ToolKitInterface</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">runCommandSetup</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Exception</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Checks to make sure it is possible to run a command either via</span>

<span class="ss">            a EnvironmentObject or the ToolKitInterface</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s1">&#39;EnvironmentObject&#39;</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="ss">&quot;ERROR: ToolKitInterface and EnvironmentObject not found&quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ExecutionException</span><span class="p">(</span><span class="s1">&#39;ToolKitInterface and EnvironmentObject not found&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="runrequirements">runRequirements</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">runRequirements</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Optional[Exception]&#39;</span>
</code></pre></div>

<p>This is the only public method. It is called when the CommandContainer is being executed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>The output of _detectRequirementFailure which is either an exception or None</td>
</tr>
</tbody>
</table>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">runRequirements</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Exception</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">            This is the only public method. It is called when the CommandContainer is being executed.</span>

<span class="ss">        :return: The output of _detectRequirementFailure which is either an exception or None</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirements</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">reqTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PriorityTaskQueue</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirementTasks</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">reqTasks</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">req</span><span class="p">))</span><span class="w"></span>

<span class="w">            </span><span class="n">Pool</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="n">reqTasks</span><span class="p">,</span><span class="w"> </span><span class="n">daemon</span><span class="o">=</span><span class="k">False</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">timeout</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_detectRequirementFailure</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">requirementTasks</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="setfailure">setFailure</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">setFailure</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Any&#39;</span>
</code></pre></div>

<p>The method is run if a failure was detected somewhere in the process.</p>
<p>This process also kicks off the custom onFailure method.</p>
<ul>
<li>:param results: results of the command or failure</li>
<li>:return: results of custom failure method or an exception</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">setFailure</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="o">:</span><span class="w"> </span><span class="kr">Any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Any</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; The method is run if a failure was detected somewhere in the process.</span>

<span class="s">            This process also kicks off the custom onFailure method.</span>

<span class="s">        - :param results: results of the command or failure</span>

<span class="s">        - :return: results of custom failure method or an exception</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="s">&quot;A failure occurred for Command: {str(self.commandKey)}&quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">f</span><span class="s">&quot;The raw failure results are: {results}&quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_onFailure</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="o">=</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">e</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">warning</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Exception when setting failure for command: {str(self.commandKey)}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;The raw failure results are: {results}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="n">SetFailureException</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">e</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">finally</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="kr">self</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="setlastresults">setLastResults</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">setLastResults</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resultsOrigin</span><span class="p">:</span> <span class="s1">&#39;Optional[str]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">phase</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This sets lastResults on the current object and tells the parent to do the same if a parent exists.</p>
<ul>
<li>:param results: value used to set lastResults</li>
<li>:param resultsOrigin: name of the child command container if called by a child</li>
<li>:param phase:</li>
<li>:return: boolean value: True for success and False for failure found in the results</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">setLastResults</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span><span class="w"> </span><span class="nl">resultsOrigin</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">,</span><span class="w"></span>

<span class="w">                       </span><span class="nl">phase</span><span class="p">:</span><span class="w"> </span><span class="ow">Any</span><span class="w"> </span><span class="o">=</span><span class="k">None</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">bool</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This sets lastResults on the current object and tells the parent to do the same if a parent exists.</span>

<span class="ss">        - :param results: value used to set lastResults</span>

<span class="ss">        - :param resultsOrigin: name of the child command container if called by a child</span>

<span class="ss">        - :param phase:</span>

<span class="ss">        - :return: boolean value: True for success and False for failure found in the results</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">checkResults</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">setFailure</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nl">resultsOrigin</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">try</span><span class="err">:</span><span class="w"></span>

<span class="w">                </span><span class="n">self</span><span class="p">.</span><span class="n">lastResults</span><span class="p">.</span><span class="k">update</span><span class="p">(</span><span class="err">{</span><span class="nl">resultsOrigin</span><span class="p">:</span><span class="w"> </span><span class="n">results</span><span class="err">}</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="ow">except</span><span class="err">:</span><span class="w"></span>

<span class="w">                </span><span class="n">self</span><span class="p">.</span><span class="n">lastResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="nl">resultsOrigin</span><span class="p">:</span><span class="w"> </span><span class="n">results</span><span class="err">}</span><span class="w"></span>

<span class="w">        </span><span class="k">else</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">lastResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">parent</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">parent</span><span class="p">.</span><span class="n">setLastResults</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">commandKey</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">phase</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">startTime</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="nc">time</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">startTime</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">timeout</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;CommandObject timed out during phase: {self.commandKey} : {phase}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TimeoutException</span><span class="p">(</span><span class="n">f</span><span class="ss">&quot;CommandObject timed out during phase: {self.commandKey} : {phase}&quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">failure</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">True</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="setrequirementsfailurecondition">setRequirementsFailureCondition</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">setRequirementsFailureCondition</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">requirementsFailureCondition</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will be checked against the results of the requirements to determine if a failure occurred.</p>
<p>This MUST be set before running the command and executing the command object.
    To allow a default failure condition in addition to an exception to define requirements success or failure
        and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not
        exist and the absence of the attribute will prevent anything other than an exception from being used.
    However, the current default value is None to allow for backward compatibility.</p>
<ul>
<li>:param requirementsFailureCondition:</li>
<li>:return: None</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="o">:</span><span class="w"> </span><span class="kr">Any</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will be checked against the results of the requirements to determine if a failure occurred.</span>

<span class="s">            This MUST be set before running the command and executing the command object.</span>

<span class="s">            To allow a default failure condition in addition to an exception to define requirements success or failure</span>

<span class="s">                and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not</span>

<span class="s">                exist and the absence of the attribute will prevent anything other than an exception from being used.</span>

<span class="s">            However, the current default value is None to allow for backward compatibility.</span>

<span class="s">        - :param requirementsFailureCondition:</span>

<span class="s">        - :return: None</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="waitforresults">waitForResults</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">waitForResults</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">wait</span><span class="p">:</span> <span class="s1">&#39;Optional[Union[float, int]]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Union[Union[str, dict], Exception]&#39;</span>
</code></pre></div>

<p>This is designed to wait until the command object is finished executing the command and parsing the results.</p>
<ul>
<li>:param wait: use when the command object has children, defaults to the timeout attribute of the container</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">waitForResults</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="kr">wait</span><span class="o">:</span><span class="w"> </span><span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">float</span><span class="p">,</span><span class="w"> </span><span class="n">int</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Union</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">dict</span><span class="p">],</span><span class="w"> </span><span class="n">Exception</span><span class="p">]</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This is designed to wait until the command object is finished executing the command and parsing the results.</span>

<span class="s">        - :param wait: use when the command object has children, defaults to the timeout attribute of the container</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">wait</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">wait</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">kwargs</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;wait&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="kr">or</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">timeout</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">wait</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="kr">True</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">wait</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">timeout</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="kr">wait</span><span class="p">(</span><span class="kr">wait</span><span class="p">)</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="kr">wait</span><span class="p">(</span><span class="kr">wait</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"></span>

<span class="w">        </span><span class="n">elif</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="kr">wait</span><span class="p">(</span><span class="kr">wait</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_timeoutExceptions</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="n">TimeoutException</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Command timed out waiting for results: {self.commandKey}&#39;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h3 id="commanddata">CommandData</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CommandData</span><span class="p">(</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="s1">&#39;Union[int, float]&#39;</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
    <span class="n">root</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;Optional[MultiEvent]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">noParsing</span><span class="p">:</span> <span class="s1">&#39;Optional[bool]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">stopOnFailure</span><span class="p">:</span> <span class="s1">&#39;Optional[bool]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeoutExceptions</span><span class="p">:</span> <span class="s1">&#39;Optional[Exception]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="descendants">Descendants</h4>
<ul>
<li>CommandContainers.CommandParsers</li>
</ul>
<h4 id="class-variables_1">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">EnvironmentObject</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">args</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">children</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">complete</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">events</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">failure</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">kwargs</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">noParsing</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parent</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parsed</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">rawResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">root</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">timeout</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">tki</span>
</code></pre></div>

<h4 id="instance-variables_1">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">lastResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">results</span>
</code></pre></div>

<h4 id="methods_1">Methods</h4>
<h4 id="addevent_1">addEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will add a new event if it does not already have it.</p>
<ul>
<li>:param event: (MultiEvent)</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">addEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="s">        - :param event: (MultiEvent)</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="nf">event</span><span class="p">,</span><span class="w"> </span><span class="nf">Event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span><span class="p">(</span><span class="s">&#39;event parement is not an Event&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="forcecomplete_1">forceComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;ForceCompleteException&#39;</span>
</code></pre></div>

<p>Force completion for the parent container and all children without changing the results.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">forceComplete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">ForceCompleteException</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="ss">            Utility method to be used on a fully initialized command container.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Forcing completion for command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Parent forcing completion of child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setEvents</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="handlechildren_1">handleChildren</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tki</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This function is called once the CommandObject is done setting up children if it has any.</p>
<p>It makes sure the children are aware of it as the parent and of tki of the parent.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">handleChildren</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="ss">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">children</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tki</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="hasevent_1">hasEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This checks to see if the specified event exists or not. This is mainly used by 'addEvent' method.</p>
<ul>
<li>:param event:</li>
<li>:return: bool</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">hasEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;</span><span class="n">addEvent</span><span class="s">&#39; method.</span>

<span class="s">        - :param event:</span>

<span class="s">        - :return: bool</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="nf">event</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="resetcontainers_1">resetContainers</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>Reset the command containers to a usable state wth all previous settings.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">resetContainers</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="s">            Utility method to be used on a fully initialized command container.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Resetting command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Parent resetting child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">resetContainers</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">pass</span><span class="w"></span>
</code></pre></div>

</details>
<h3 id="commandparsers">CommandParsers</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CommandParsers</span><span class="p">(</span>
    <span class="n">command</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span><span class="p">,</span>
    <span class="n">commandKey</span><span class="p">:</span> <span class="s1">&#39;Union[None, str]&#39;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="ancestors-in-mro_1">Ancestors (in MRO)</h4>
<ul>
<li>CommandContainers.CommandData</li>
</ul>
<h4 id="descendants_1">Descendants</h4>
<ul>
<li>CommandContainers.CommandRequirements</li>
</ul>
<h4 id="class-variables_2">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">EnvironmentObject</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">args</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">children</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">complete</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">customPostParser</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">events</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">failure</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">kwargs</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">noParsing</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parent</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parsed</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">rawResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">root</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">timeout</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">tki</span>
</code></pre></div>

<h4 id="instance-variables_2">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">command</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">commandKey</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">lastResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">results</span>
</code></pre></div>

<h4 id="methods_2">Methods</h4>
<h4 id="addevent_2">addEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will add a new event if it does not already have it.</p>
<ul>
<li>:param event: (MultiEvent)</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">addEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="s">        - :param event: (MultiEvent)</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="nf">event</span><span class="p">,</span><span class="w"> </span><span class="nf">Event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span><span class="p">(</span><span class="s">&#39;event parement is not an Event&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="forcecomplete_2">forceComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;ForceCompleteException&#39;</span>
</code></pre></div>

<p>Force completion for the parent container and all children without changing the results.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">forceComplete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">ForceCompleteException</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="ss">            Utility method to be used on a fully initialized command container.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Forcing completion for command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Parent forcing completion of child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setEvents</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="handlechildren_2">handleChildren</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tki</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This function is called once the CommandObject is done setting up children if it has any.</p>
<p>It makes sure the children are aware of it as the parent and of tki of the parent.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">handleChildren</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="ss">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">children</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tki</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="hasevent_2">hasEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This checks to see if the specified event exists or not. This is mainly used by 'addEvent' method.</p>
<ul>
<li>:param event:</li>
<li>:return: bool</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">hasEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;</span><span class="n">addEvent</span><span class="s">&#39; method.</span>

<span class="s">        - :param event:</span>

<span class="s">        - :return: bool</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="nf">event</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="resetcontainers_2">resetContainers</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>Reset the command containers to a usable state wth all previous settings.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">resetContainers</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="s">            Utility method to be used on a fully initialized command container.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Resetting command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Parent resetting child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">resetContainers</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">pass</span><span class="w"></span>
</code></pre></div>

</details>
<h3 id="commandrequirements">CommandRequirements</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CommandRequirements</span><span class="p">(</span>
    <span class="n">command</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span><span class="p">,</span>
    <span class="n">commandKey</span><span class="p">:</span> <span class="s1">&#39;Optional[str]&#39;</span><span class="p">,</span>
    <span class="n">requirements</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="ancestors-in-mro_2">Ancestors (in MRO)</h4>
<ul>
<li>CommandContainers.CommandParsers</li>
<li>CommandContainers.CommandData</li>
</ul>
<h4 id="descendants_2">Descendants</h4>
<ul>
<li>CommandContainers.CommandSetup</li>
</ul>
<h4 id="class-variables_3">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">EnvironmentObject</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">args</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">children</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">complete</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">customPostParser</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">events</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">failure</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">kwargs</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">noParsing</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parent</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parsed</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">rawResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementFailureVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementIncompleteVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementTasks</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirements</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">root</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">timeout</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">tki</span>
</code></pre></div>

<h4 id="instance-variables_3">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">command</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">commandKey</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">lastResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementResults</span>
</code></pre></div>

<p>Wraps requirementResults with a lock.</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span>
</code></pre></div>

<h4 id="methods_3">Methods</h4>
<h4 id="addevent_3">addEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will add a new event if it does not already have it.</p>
<ul>
<li>:param event: (MultiEvent)</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">addEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="s">        - :param event: (MultiEvent)</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="nf">event</span><span class="p">,</span><span class="w"> </span><span class="nf">Event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span><span class="p">(</span><span class="s">&#39;event parement is not an Event&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="forcecomplete_3">forceComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;ForceCompleteException&#39;</span>
</code></pre></div>

<p>Force completion for the parent container and all children without changing the results.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">forceComplete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">ForceCompleteException</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="ss">            Utility method to be used on a fully initialized command container.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Forcing completion for command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Parent forcing completion of child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setEvents</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="handlechildren_3">handleChildren</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tki</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This function is called once the CommandObject is done setting up children if it has any.</p>
<p>It makes sure the children are aware of it as the parent and of tki of the parent.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">handleChildren</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="ss">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">children</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tki</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="hasevent_3">hasEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This checks to see if the specified event exists or not. This is mainly used by 'addEvent' method.</p>
<ul>
<li>:param event:</li>
<li>:return: bool</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">hasEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;</span><span class="n">addEvent</span><span class="s">&#39; method.</span>

<span class="s">        - :param event:</span>

<span class="s">        - :return: bool</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="nf">event</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="resetcontainers_3">resetContainers</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>Reset the command containers to a usable state wth all previous settings.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">resetContainers</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="s">            Utility method to be used on a fully initialized command container.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Resetting command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Parent resetting child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">resetContainers</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">pass</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="runrequirements_1">runRequirements</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">runRequirements</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Optional[Exception]&#39;</span>
</code></pre></div>

<p>This is the only public method. It is called when the CommandContainer is being executed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>The output of _detectRequirementFailure which is either an exception or None</td>
</tr>
</tbody>
</table>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">runRequirements</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Exception</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">            This is the only public method. It is called when the CommandContainer is being executed.</span>

<span class="ss">        :return: The output of _detectRequirementFailure which is either an exception or None</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirements</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">reqTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PriorityTaskQueue</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirementTasks</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">reqTasks</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">req</span><span class="p">))</span><span class="w"></span>

<span class="w">            </span><span class="n">Pool</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="n">reqTasks</span><span class="p">,</span><span class="w"> </span><span class="n">daemon</span><span class="o">=</span><span class="k">False</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">timeout</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_detectRequirementFailure</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">requirementTasks</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="setrequirementsfailurecondition_1">setRequirementsFailureCondition</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">setRequirementsFailureCondition</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">requirementsFailureCondition</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will be checked against the results of the requirements to determine if a failure occurred.</p>
<p>This MUST be set before running the command and executing the command object.
    To allow a default failure condition in addition to an exception to define requirements success or failure
        and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not
        exist and the absence of the attribute will prevent anything other than an exception from being used.
    However, the current default value is None to allow for backward compatibility.</p>
<ul>
<li>:param requirementsFailureCondition:</li>
<li>:return: None</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="o">:</span><span class="w"> </span><span class="kr">Any</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will be checked against the results of the requirements to determine if a failure occurred.</span>

<span class="s">            This MUST be set before running the command and executing the command object.</span>

<span class="s">            To allow a default failure condition in addition to an exception to define requirements success or failure</span>

<span class="s">                and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not</span>

<span class="s">                exist and the absence of the attribute will prevent anything other than an exception from being used.</span>

<span class="s">            However, the current default value is None to allow for backward compatibility.</span>

<span class="s">        - :param requirementsFailureCondition:</span>

<span class="s">        - :return: None</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="w"></span>
</code></pre></div>

</details>
<h3 id="commandsetup">CommandSetup</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CommandSetup</span><span class="p">(</span>
    <span class="n">command</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span><span class="p">,</span>
    <span class="n">commandKey</span><span class="p">:</span> <span class="s1">&#39;Optional[str]&#39;</span><span class="p">,</span>
    <span class="n">preparser</span><span class="p">:</span> <span class="s1">&#39;Optional[Callable]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">postparser</span><span class="p">:</span> <span class="s1">&#39;Optional[Callable]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">onFail</span><span class="p">:</span> <span class="s1">&#39;Optional[Callable]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">completiontask</span><span class="p">:</span> <span class="s1">&#39;Optional[Callable]&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>

<h4 id="ancestors-in-mro_3">Ancestors (in MRO)</h4>
<ul>
<li>CommandContainers.CommandRequirements</li>
<li>CommandContainers.CommandParsers</li>
<li>CommandContainers.CommandData</li>
</ul>
<h4 id="descendants_3">Descendants</h4>
<ul>
<li>CommandContainers.CommandContainer</li>
</ul>
<h4 id="class-variables_4">Class variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">EnvironmentObject</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">args</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">children</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">complete</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">customPostParser</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">events</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">failure</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">kwargs</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">noParsing</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parent</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">parsed</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">rawResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementFailureVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementIncompleteVar</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementTasks</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirements</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">root</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">timeout</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">tki</span>
</code></pre></div>

<h4 id="instance-variables_4">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">command</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">commandKey</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">lastResults</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">requirementResults</span>
</code></pre></div>

<p>Wraps requirementResults with a lock.</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span>
</code></pre></div>

<h4 id="methods_4">Methods</h4>
<h4 id="addevent_4">addEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">addEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will add a new event if it does not already have it.</p>
<ul>
<li>:param event: (MultiEvent)</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">addEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will add a new event if it does not already have it.</span>

<span class="s">        - :param event: (MultiEvent)</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="nf">event</span><span class="p">,</span><span class="w"> </span><span class="nf">Event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span><span class="p">(</span><span class="s">&#39;event parement is not an Event&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">hasEvent</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nf">event</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="forcecomplete_4">forceComplete</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forceComplete</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;ForceCompleteException&#39;</span>
</code></pre></div>

<p>Force completion for the parent container and all children without changing the results.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">forceComplete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">results</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">ForceCompleteException</span><span class="p">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Force completion for the parent container and all children without changing the results.</span>

<span class="ss">            Utility method to be used on a fully initialized command container.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Forcing completion for command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Parent forcing completion of child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">forceComplete</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="k">set</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setEvents</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">False</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ForceCompleteException</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">baseException</span><span class="o">=</span><span class="n">results</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="handlechildren_4">handleChildren</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">handleChildren</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tki</span><span class="p">:</span> <span class="s1">&#39;Optional[Any]&#39;</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This function is called once the CommandObject is done setting up children if it has any.</p>
<p>It makes sure the children are aware of it as the parent and of tki of the parent.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">handleChildren</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Any</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; This function is called once the CommandObject is done setting up children if it has any.</span>

<span class="ss">            It makes sure the children are aware of it as the parent and of tki of the parent.</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">children</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">children</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">add_event</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_event</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="w"></span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nl">tki</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tki</span><span class="w"></span>

<span class="w">            </span><span class="n">child</span><span class="p">.</span><span class="n">handleChildren</span><span class="p">(</span><span class="n">tki</span><span class="o">=</span><span class="n">tki</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="hasevent_4">hasEvent</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">hasEvent</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="s1">&#39;MultiEvent&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;bool&#39;</span>
</code></pre></div>

<p>This checks to see if the specified event exists or not. This is mainly used by 'addEvent' method.</p>
<ul>
<li>:param event:</li>
<li>:return: bool</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">hasEvent</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="nf">event</span><span class="o">:</span><span class="w"> </span><span class="n">MultiEvent</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bool</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This checks to see if the specified event exists or not. This is mainly used by &#39;</span><span class="n">addEvent</span><span class="s">&#39; method.</span>

<span class="s">        - :param event:</span>

<span class="s">        - :return: bool</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="nf">event</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">events</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kr">True</span><span class="w"></span>

<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="resetcontainers_4">resetContainers</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">resetContainers</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>Reset the command containers to a usable state wth all previous settings.</p>
<p>Utility method to be used on a fully initialized command container.</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">resetContainers</span><span class="p">(</span><span class="kr">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; Reset the command containers to a usable state wth all previous settings.</span>

<span class="s">            Utility method to be used on a fully initialized command container.</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Resetting command object: {self}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">for</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">children</span><span class="o">:</span><span class="w"></span>

<span class="w">                </span><span class="nf">log</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s">&#39;Parent resetting child: {self} : {child}&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">                </span><span class="n">child</span><span class="p">.</span><span class="n">resetContainers</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_completionEvent</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">_event</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="kr">failure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">parsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">complete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">False</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_tkiBackup</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">self</span><span class="p">.</span><span class="n">_EnvironmentObjectBackup</span><span class="w"></span>

<span class="w">        </span><span class="n">try</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="kr">self</span><span class="p">.</span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="kr">except</span><span class="o">:</span><span class="w"></span>

<span class="w">            </span><span class="n">pass</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="runcommandsetup_1">runCommandSetup</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">runCommandSetup</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Optional[Exception]&#39;</span>
</code></pre></div>

<p>Checks to make sure it is possible to run a command either via</p>
<p>a EnvironmentObject or the ToolKitInterface</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">runCommandSetup</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Exception</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot; Checks to make sure it is possible to run a command either via</span>

<span class="ss">            a EnvironmentObject or the ToolKitInterface</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">EnvironmentObject</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="s1">&#39;EnvironmentObject&#39;</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">tki</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="nf">log</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="ss">&quot;ERROR: ToolKitInterface and EnvironmentObject not found&quot;</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">ExecutionException</span><span class="p">(</span><span class="s1">&#39;ToolKitInterface and EnvironmentObject not found&#39;</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="runrequirements_2">runRequirements</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">runRequirements</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Optional[Exception]&#39;</span>
</code></pre></div>

<p>This is the only public method. It is called when the CommandContainer is being executed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>The output of _detectRequirementFailure which is either an exception or None</td>
</tr>
</tbody>
</table>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">runRequirements</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">Exception</span><span class="o">]</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">            This is the only public method. It is called when the CommandContainer is being executed.</span>

<span class="ss">        :return: The output of _detectRequirementFailure which is either an exception or None</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirements</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">reqTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PriorityTaskQueue</span><span class="p">()</span><span class="w"></span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nl">requirementTasks</span><span class="p">:</span><span class="w"></span>

<span class="w">                </span><span class="n">reqTasks</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">req</span><span class="p">))</span><span class="w"></span>

<span class="w">            </span><span class="n">Pool</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="n">reqTasks</span><span class="p">,</span><span class="w"> </span><span class="n">daemon</span><span class="o">=</span><span class="k">False</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">timeout</span><span class="p">)</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">_detectRequirementFailure</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">requirementTasks</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

</details>
<h4 id="setrequirementsfailurecondition_2">setRequirementsFailureCondition</h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">setRequirementsFailureCondition</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">requirementsFailureCondition</span><span class="p">:</span> <span class="s1">&#39;Any&#39;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;None&#39;</span>
</code></pre></div>

<p>This will be checked against the results of the requirements to determine if a failure occurred.</p>
<p>This MUST be set before running the command and executing the command object.
    To allow a default failure condition in addition to an exception to define requirements success or failure
        and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not
        exist and the absence of the attribute will prevent anything other than an exception from being used.
    However, the current default value is None to allow for backward compatibility.</p>
<ul>
<li>:param requirementsFailureCondition:</li>
<li>:return: None</li>
</ul>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">setRequirementsFailureCondition</span><span class="p">(</span><span class="kr">self</span><span class="p">,</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="o">:</span><span class="w"> </span><span class="kr">Any</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">:</span><span class="w"></span>

<span class="w">        </span><span class="s">&quot;&quot;&quot; This will be checked against the results of the requirements to determine if a failure occurred.</span>

<span class="s">            This MUST be set before running the command and executing the command object.</span>

<span class="s">            To allow a default failure condition in addition to an exception to define requirements success or failure</span>

<span class="s">                and allow None to be a valid success criteria, the attribute requirementsFailureCondition will not</span>

<span class="s">                exist and the absence of the attribute will prevent anything other than an exception from being used.</span>

<span class="s">            However, the current default value is None to allow for backward compatibility.</span>

<span class="s">        - :param requirementsFailureCondition:</span>

<span class="s">        - :return: None</span>

<span class="s">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="kr">self</span><span class="p">.</span><span class="n">requirementsFailureCondition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">requirementsFailureCondition</span><span class="w"></span>
</code></pre></div>

</details>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../PyLinuxDiagnosticToolKit/LinuxModules/" title="CommandContainer" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                CommandContainer
              </span>
            </div>
          </a>
        
        
          <a href="../SCPChannel/" title="Scpchannel" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Scpchannel
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Powered by
        <a href="http://timothycrosley.github.io/portray">portray.</a>
        You too can
        <a href="http://timothycrosley.github.io/portray">
          portray</a>
        your Python project well using automatic documentation.
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>